d-i debian-installer/locale string fr_CH
d-i console-keymaps-at/keymap select ch(fr)
d-i keyboard-configuration/xkb-keymap select ch(fr)

d-i passwd/root-login boolean true
d-i passwd/root-password password abcd1234
d-i passwd/root-password-again password abcd1234
d-i passwd/make-user boolean false


d-i netcfg/get_hostname string debiantest

d-i time/zone string UTC

d-i partman-auto/disk string /dev/sda
d-i partman-auto/method string lvm
d-i partman-lvm/device_remove_lvm boolean true
d-i partman-lvm/device_remove_lvm_span boolean true
d-i partman-auto/purge_lvm_from_device  boolean true
d-i partman-auto-lvm/new_vg_name string vg01
d-i partman-auto/expert_recipe string                         \
      boot-root ::                                            \
              1 1 1 free method{ biosgrub } .                 \
              250 250 250 ext2                                \
                      $primary{ } $bootable{ }                \
                      method{ format } format{ }              \
                      use_filesystem{ } filesystem{ ext2 }    \
                      mountpoint{ /boot }                     \
              .                                               \
              100% 2048 100% linux-swap                       \
                      lv_name{ swap }                         \
                      method{ swap } format{ }                \
                      $lvmok{ }                               \
              .                                               \
              2048 2048 2048 ext4                             \
                      lv_name{ root }                         \
                      method{ lvm } format{ }                 \
                      use_filesystem{ } filesystem{ ext4 }    \
                      mountpoint{ / }                         \
                      $lvmok{ }                               \
              .                                               \
              1024 1024 -1 ext4                                \
                      lv_name{ data }                         \
                      method{ lvm } format{ }                 \
                      use_filesystem{ } filesystem{ ext4 }     \
                      mountpoint{ /data }                     \
                      $lvmok{ }                               \
              .
d-i partman-lvm/confirm boolean true
d-i partman/confirm_write_new_label boolean true
d-i partman/choose_partition select finish
d-i partman/confirm boolean true

d-i apt-setup/non-free boolean true
d-i apt-setup/contrib boolean true

tasksel tasksel/first multiselect
d-i pkgsel/include string curl openssh-server sudo net-tools

d-i grub-installer/bootdev string default

d-i finish-install/reboot_in_progress note
d-i preseed/late_command string                                                   \
        echo 'PermitRootLogin yes' >> /target/etc/sshd/config;  \
        systemctl restart ssh
